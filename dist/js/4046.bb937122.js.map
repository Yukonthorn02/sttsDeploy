{"version":3,"file":"js/4046.bb937122.js","mappings":"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","sources":["webpack://@coreui/coreui-pro-vue-admin-template/./src/views/support-ticket/users/user_dashboard.vue","webpack://@coreui/coreui-pro-vue-admin-template/./src/views/support-ticket/users/user_dashboard.vue?ceec"],"sourcesContent":["<template>\n  <div class=\"box\">\n    <CRow>\n      <Ccrad>\n        <CCardHeader>\n          <h1\n            style=\"\n              width: 180px;\n              border-bottom: 5px solid transparent;\n              border-image: linear-gradient(to right, #ea5252, #030303);\n              border-image-slice: 1;\n            \"\n          >\n            Dashbord\n          </h1>\n        </CCardHeader>\n        <CRow class=\"mb-3\">\n          <CCol>\n            <CCard class=\"p-2 mb-2\" id=\"border\">\n              <CCardbody>\n                <b id=\"all\">All Tickets</b>\n                <CRow>\n                  <CCol>\n                    <p class=\"ps-5 ms-3\" id=\"font\">{{ count_all }}</p>\n                  </CCol>\n                  <CCol class=\"mt-5\">\n                    <CImage class=\"LG\" :src=\"LGblue\" fluid block />\n                  </CCol>\n                </CRow>\n              </CCardbody>\n            </CCard>\n          </CCol>\n          <CCol>\n            <CCard class=\"p-2 mb-2\" id=\"border\">\n              <CCardbody>\n                <b id=\"open\">Open Tickets</b>\n                <CRow>\n                  <CCol>\n                    <p class=\"ps-5 ms-3\" id=\"font\">{{ count_open }}</p>\n                  </CCol>\n                  <CCol class=\"mt-5\">\n                    <CImage class=\"LG\" :src=\"LGgreen\" fluid block />\n                  </CCol>\n                </CRow>\n              </CCardbody>\n            </CCard>\n          </CCol>\n          <CCol>\n            <CCard class=\"p-2 mb-2\" id=\"border\">\n              <CCardbody>\n                <b id=\"closed\">Closed Tickets</b>\n                <CRow>\n                  <CCol>\n                    <p class=\"ps-5 ms-3\" id=\"font\">{{ count_closed }}</p>\n                  </CCol>\n                  <CCol class=\"mt-5\">\n                    <CImage class=\"LG\" :src=\"LGred\" fluid block />\n                  </CCol>\n                </CRow>\n              </CCardbody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </Ccrad>\n    </CRow>\n    <CCard class=\"p-2 rounded-4\">\n      <CCardHeader class=\"bg-white border-white\">\n        <div class=\"d-inline ms-2\">\n          <CImage\n            class=\"me-2 align-middle\"\n            style=\"width: 51px; height: 36px\"\n            :src=\"LGlogo\"\n            \n          />\n          <h2 class=\"d-inline align-middle\">My Tickets</h2>\n          <div\n            style=\"\n              width: 225px;\n              border-bottom: 5px solid transparent;\n              border-image: linear-gradient(to right, red, blue);\n              border-image-slice: 1;\n              padding: 3px;\n            \"\n          ></div>\n        </div>\n      </CCardHeader>\n      <div class=\"table-responsive table-borderless\">\n        <CSmartTable\n          :active-page=\"1\"\n          header\n          cleaner\n          :items=\"items\"\n          :columns=\"columns\"\n          columnFilter\n          column-sorter\n          clickable-rows\n          table-filter\n          :items-per-page=\"5\"\n          items-per-page-select\n          pagination\n          columnSorter\n          :sorterValue=\"{ column: 'status', state: 'asc' }\"\n          :table-props=\"{\n            striped: true,\n            hover: true,\n          }\"\n        >\n        <template #STATUS=\"{ item }\">\n        <td>\n          \n          <CBadge :color=\"getBadge(item.STATUS)\">{{ item.STATUS }}</CBadge>\n          \n        </td>\n      </template>\n\n        <template #BOOKMARK=\"{ item, index }\" >\n          <td class=\"text-center\">\n            <CButton\n              variant=\"outline\"\n              square\n              size=\"xl\"\n              @click=\"toggleDetails(item, index)\"\n            >\n            {{ Boolean(item.BOOKMARK) ? '👁️' : '🙈' }}\n            </CButton>\n          </td>\n        </template>\n        <template #MORE=\"{ item, index }\" >\n          <td class=\"text-center\">\n            <CButton\n              color=\"primary\"\n              variant=\"outline\"\n              square\n              size=\"xl\"\n              @click=\"toggleButton(item, index)\"\n            >\n            {{ Boolean(item.MORE) ? 'Hide' : 'Show' }}\n            </CButton>\n          </td>\n        </template>\n        <template #details=\"{ item , index }\">\n          <CCollapse :visible=\"Boolean(item.MORE)\">\n            <CCardBody>\n              <h4>\n                {{ item.tkt_title }}\n              </h4>\n              <CButton size=\"sm\" color=\"info\" class=\"\" @click=\"contactIt(item , index)\"> ติดต่อ It Suport </CButton>\n              <CButton size=\"sm\" color=\"danger\" class=\"ml-3\" @click=\"buttonCancel(item, index)\"> Cancel </CButton>\n            </CCardBody>\n          </CCollapse>\n        </template>\n        </CSmartTable>\n      </div>\n    </CCard>\n  </div>\n  <div></div>\n</template>\n<style>\n.text-right-header {\n  text-align: right;\n}\n#all {\n  font-size: 24px;\n  color: #1a72b8;\n}\n#open {\n  font-size: 24px;\n  color: #147a2a;\n}\n#closed {\n  font-size: 24px;\n  color: #b22424;\n}\n#font {\n  font-weight: 700;\n  align-items: center;\n  font-size: 100px;\n  color: #000;\n}\n.LG {\n  width: 50%;\n}\n#border {\n  border-radius: 6%;\n}\n\n.table-responsive {\n  overflow-x: auto;\n  max-width: 100%;\n}\n</style>\n\n<script>\nimport { ref } from 'vue'\nimport { CCol, CRow } from '@coreui/vue-pro'\nimport LGblue from '@/assets/images/blueTick.png'\nimport LGred from '@/assets/images/redTick.png'\nimport LGgreen from '@/assets/images/greenTick.png'\nimport LGlogo from '@/assets/images/blackTick.png'\nimport axios from 'axios'\nimport { CBadge } from '@coreui/vue-pro'\nexport default {\n  name: 'SmartTableBasixExample',\n  \n\n    data(){\n      return {\n            data_array:[],\n            \n            tkt_number: '',\n            tkt_description: '',\n            tkt_picture: '',\n            tkt_title: '',\n            tkt_time: '',\n            tkt_last_update: '',\n            tkt_status: '',\n            tkt_priorities: '',\n            tkt_types: '',\n            tkt_book: '',\n            tkt_act: '',\n            count_all:'',\n            count_open:'',\n            count_closed:'',\n\n\n        };\n\n    },\n    setup() {\n        const columns = [\n            \n            { key: '#',_style: { width: '5%' }},\n            { key: 'TicketID',_style: { width: '10%' }},            \n            { key: 'TITLE', _style: { width: '10%' } },\n            { key: 'START DATE', _style: { width: '11%' } },\n            { key: 'STATUS', _style: { width: '5%' } },\n            { key: 'TYPE', _style: { width: '4%' } },\n            { key: 'BOOKMARK', _style: { width: '5%' } },\n            { key: 'MORE',_style: { width: '5%' }},\n            \n     \n        ];\n        const getBadge = (tkt_status) => {\n          switch (tkt_status) {\n            case 'Pending':\n              return 'success';\n            case 'Open':\n              return 'secondary';\n            case 'Closed':\n              return 'warning';\n            case 'Banned':\n              return 'danger';\n            default:\n              return 'primary'; // Return a default color if none of the cases match.\n          }\n        };\n        \n        const items = ref([]);\n        \n\n        async function getData() {\n          const user = JSON.parse(localStorage.getItem(\"USER_DATA\"))\n          try {\n            const response = await axios({\n              method: 'GET',\n              url: 'http://localhost:3000/mongoose/get/check-token',\n              headers: { 'Authorization': 'Bearer ' + user.token }\n            })\n            console.log(response)\n          } catch (error) {\n            console.log(error)\n          }\n        }\n        const activePage = ref(1)\n        return {\n            LGblue,\n            LGgreen,\n            LGred,\n            LGlogo,\n            columns,\n            items,\n            getBadge,\n            activePage,\n            getData,\n        };\n    },\n\n    components: { CRow, CCol },\n    methods:{\n      async contactIt(item){\n        const itemId = item._id.toString(); \n\n        this.$router.push({ name: 'ST - comment Ticket', params: { itemId } });\n      \n      },\n      async toggleDetails(item){\n\n      item.BOOKMARK = !item.BOOKMARK;\n      try {\n        const itemId = item._id.toString(); \n        // ทำการอัปเดตข้อมูลใน MongoDB โดยใช้ Axios\n        await axios.put(`http://localhost:3000/mongoose/update/stts_tickets/${itemId}`, {\n          data:{\n              tkt_book: item.BOOKMARK\n\n          }\n        });\n\n        // หลังจากอัปเดตสำเร็จ คุณสามารถทำสิ่งอื่นที่คุณต้องการได้ที่นี่\n        console.log('อัปเดต BOOKMARK และส่งข้อมูลไปยัง MongoDB สำเร็จ');\n      } catch (error) {\n        console.error('เกิดข้อผิดพลาดในการอัปเดตข้อมูล:', error);\n      }\n      },\n\n      async buttonCancel(item) {\n\n      try {\n        const itemId = item._id.toString(); \n        // ทำการอัปเดตข้อมูลใน MongoDB โดยใช้ Axios\n        await axios.put(`http://localhost:3000/mongoose/update/stts_tickets/${itemId}`, {\n          data:{\n              tkt_status: \"Cancel\"\n\n          }\n        });\n\n        // หลังจากอัปเดตสำเร็จ คุณสามารถทำสิ่งอื่นที่คุณต้องการได้ที่นี่\n        console.log('อัปเดต BOOKMARK และส่งข้อมูลไปยัง MongoDB สำเร็จ');\n        // รีเฟรชหน้า\n        window.location.reload();\n        \n      } catch (error) {\n        console.error('เกิดข้อผิดพลาดในการอัปเดตข้อมูล:', error);\n      }\n      },\n\n      async toggleButton(item) {\n        item.MORE = !item.MORE;\n        },\n\n      async getTicket(){\n        try {\n          const userData = JSON.parse(localStorage.getItem('USER_DATA')); // ดึงข้อมูล USER_DATA จาก local storage\n          const userId = userData.id.toString(); // ดึงค่า id จาก userData\n\n          const response = await axios.post('http://localhost:3000/mongoose/get/stts_tickets', {\n            where: {\n              tkt_act: userId,\n              tkt_status: { $ne: 'Cancel' }\n\n            },\n          });\n          // นำข้อมูลที่ได้รับมาใส่ในตัวแปร items\n          this.items = response.data.map((element, index) => ({\n            '#': index + 1, // หมายเลขแถว\n            _id:element._id,\n            TicketID: element.tkt_number, // ข้อมูล TicketID จาก response\n            TITLE: element.tkt_title, // ข้อมูล tkt_title จาก response\n            // นำข้อมูลอื่นๆ จาก response มาใส่ตามที่คุณต้องการ\n            // ตามลำดับของ columns ในตัวแปร columns\n            // เพิ่มเติมตามความต้องการ\n            'START DATE': element.tkt_time,\n            STATUS:element.tkt_status  ,\n            TYPE: element.tkt_types,\n            BOOKMARK: element.tkt_book,\n            MORE: false, // ให้เริ่มต้นเป็น false สำหรับการแสดงรายละเอียด\n          }));\n        } catch (error) {\n          console.error('Error fetching data:', error);\n        }\n\n      }, \n\n\n      async getCountall (){\n        const userData = JSON.parse(localStorage.getItem('USER_DATA')); // ดึงข้อมูล USER_DATA จาก local storage\n          const userId = userData.id.toString(); // ดึงค่า id จาก userData\n          const allTicket = await axios.post('http://localhost:3000/mongoose/get/stts_tickets', {\n            where: {\n              tkt_act: userId,\n              tkt_status: { $ne: 'Cancel' }\n            },\n          });\n          // console.log(allTicket)\n        var countAll =0;\n        var countOpen =0;\n        var countClosed =0;\n        allTicket.data.forEach(element => {\n            countAll++;\n            if(element.tkt_status=='Open'){\n              countOpen++;\n            }else if(element.tkt_status=='Closed'){\n              countClosed++;\n            }\n\n          });\n\n          this.count_all=countAll;\n          this.count_open=countOpen;\n          this.count_closed=countClosed;\n      }\n\n\n    },\n    mounted(){\n      //เรียกใช้ฟังชั่นเมื่อโหลดหน้า\n      this.getCountall();\n      this.getTicket();\n      \n\n    }\n  }\n</script>\n","import { render } from \"./user_dashboard.vue?vue&type=template&id=6d44ee16\"\nimport script from \"./user_dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./user_dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./user_dashboard.vue?vue&type=style&index=0&id=6d44ee16&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","_hoisted_1","_createVNode","_component_CRow","_component_Ccrad","_component_CCardHeader","_hoisted_2","_component_CCol","_component_CCard","_component_CCardbody","_hoisted_3","_hoisted_4","_toDisplayString","$data","count_all","_component_CImage","src","$setup","LGblue","fluid","block","_hoisted_5","_hoisted_6","count_open","LGgreen","_hoisted_7","_hoisted_8","count_closed","LGred","_hoisted_9","LGlogo","_hoisted_10","_hoisted_11","_hoisted_12","_component_CSmartTable","header","cleaner","items","columns","columnFilter","pagination","columnSorter","sorterValue","column","state","STATUS","_withCtx","item","_component_CBadge","color","getBadge","BOOKMARK","index","_hoisted_13","_component_CButton","variant","square","size","onClick","$event","$options","toggleDetails","Boolean","MORE","_hoisted_14","toggleButton","details","_component_CCollapse","visible","_component_CCardBody","tkt_title","contactIt","buttonCancel","_hoisted_15","name","data","data_array","tkt_number","tkt_description","tkt_picture","tkt_time","tkt_last_update","tkt_status","tkt_priorities","tkt_types","tkt_book","tkt_act","setup","key","_style","width","ref","async","getData","user","JSON","parse","localStorage","getItem","response","axios","method","url","headers","token","console","log","error","activePage","components","CRow","CCol","methods","itemId","_id","toString","this","$router","push","params","put","window","location","reload","getTicket","userData","userId","post","where","$ne","map","element","TicketID","TITLE","TYPE","getCountall","allTicket","countAll","countOpen","countClosed","forEach","mounted","__exports__","render"],"sourceRoot":""}