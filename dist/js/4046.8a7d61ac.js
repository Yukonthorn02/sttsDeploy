"use strict";(self["webpackChunk_coreui_coreui_pro_vue_admin_template"]=self["webpackChunk_coreui_coreui_pro_vue_admin_template"]||[]).push([[4046],{4046:function(t,e,l){l.r(e),l.d(e,{default:function(){return M}});var s=l(3396),o=l(2268);const a={class:"box"},n=(0,s._)("h1",{style:{width:"180px","border-bottom":"5px solid transparent","border-image":"linear-gradient(to right, #ea5252, #030303)","border-image-slice":"1"}}," Dashbord ",-1),i=(0,s._)("b",{id:"all"},"All Tickets",-1),c={class:"ps-5 ms-3",id:"font"},r=(0,s._)("b",{id:"open"},"Open Tickets",-1),u={class:"ps-5 ms-3",id:"font"},d=(0,s._)("b",{id:"closed"},"Closed Tickets",-1),m={class:"ps-5 ms-3",id:"font"},_={class:"d-inline ms-2"},p=(0,s._)("h2",{class:"d-inline align-middle"},"My Tickets",-1),g=(0,s._)("div",{style:{width:"225px","border-bottom":"5px solid transparent","border-image":"linear-gradient(to right, red, blue)","border-image-slice":"1",padding:"3px"}},null,-1),w={class:"table-responsive table-borderless"},A={class:"text-center"},k={class:"text-center"},h=(0,s._)("div",null,null,-1);function f(t,e,l,f,b,T){const C=(0,s.up)("CCardHeader"),y=(0,s.up)("CCol"),B=(0,s.up)("CImage"),O=(0,s.up)("CRow"),W=(0,s.up)("CCardbody"),S=(0,s.up)("CCard"),R=(0,s.up)("Ccrad"),E=(0,s.up)("CBadge"),M=(0,s.up)("CButton"),K=(0,s.up)("CCardBody"),v=(0,s.up)("CCollapse"),x=(0,s.up)("CSmartTable");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s.Wm)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[n])),_:1}),(0,s.Wm)(O,{class:"mb-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"p-2 mb-2",id:"border"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[i,(0,s.Wm)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("p",c,(0,o.zw)(b.count_all),1)])),_:1}),(0,s.Wm)(y,{class:"mt-5"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{class:"LG",src:f.LGblue,fluid:"",block:""},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"p-2 mb-2",id:"border"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[r,(0,s.Wm)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("p",u,(0,o.zw)(b.count_open),1)])),_:1}),(0,s.Wm)(y,{class:"mt-5"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{class:"LG",src:f.LGgreen,fluid:"",block:""},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"p-2 mb-2",id:"border"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[d,(0,s.Wm)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("p",m,(0,o.zw)(b.count_closed),1)])),_:1}),(0,s.Wm)(y,{class:"mt-5"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{class:"LG",src:f.LGred,fluid:"",block:""},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(S,{class:"p-2 rounded-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{class:"bg-white border-white"},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s.Wm)(B,{class:"me-2 align-middle",style:{width:"51px",height:"36px"},src:f.LGlogo},null,8,["src"]),p,g])])),_:1}),(0,s._)("div",w,[(0,s.Wm)(x,{"active-page":1,header:"",cleaner:"",items:f.items,columns:f.columns,columnFilter:"","column-sorter":"","clickable-rows":"","table-filter":"","items-per-page":5,"items-per-page-select":"",pagination:"",columnSorter:"",sorterValue:{column:"status",state:"asc"},"table-props":{striped:!0,hover:!0}},{STATUS:(0,s.w5)((({item:t})=>[(0,s._)("td",null,[(0,s.Wm)(E,{color:f.getBadge(t.STATUS)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.STATUS),1)])),_:2},1032,["color"])])])),BOOKMARK:(0,s.w5)((({item:t,index:e})=>[(0,s._)("td",A,[(0,s.Wm)(M,{variant:"outline",square:"",size:"xl",onClick:l=>T.toggleDetails(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(Boolean(t.BOOKMARK)?"👁️":"🙈"),1)])),_:2},1032,["onClick"])])])),MORE:(0,s.w5)((({item:t,index:e})=>[(0,s._)("td",k,[(0,s.Wm)(M,{color:"primary",variant:"outline",square:"",size:"xl",onClick:l=>T.toggleButton(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(Boolean(t.MORE)?"Hide":"Show"),1)])),_:2},1032,["onClick"])])])),details:(0,s.w5)((({item:t,index:e})=>[(0,s.Wm)(v,{visible:Boolean(t.MORE)},{default:(0,s.w5)((()=>[(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s._)("h4",null,(0,o.zw)(t.tkt_title),1),(0,s.Wm)(M,{size:"sm",color:"info",class:"",onClick:l=>T.contactIt(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)(" ติดต่อ It Suport ")])),_:2},1032,["onClick"]),(0,s.Wm)(M,{size:"sm",color:"danger",class:"ml-3",onClick:l=>T.buttonCancel(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Cancel ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["visible"])])),_:1},8,["items","columns"])])])),_:1})]),h],64)}l(7658);var b=l(4870),T=l(5428),C=l(6279),y=l(2036),B=l(7022),O=l(6672),W=l(4161),S={name:"SmartTableBasixExample",data(){return{data_array:[],tkt_number:"",tkt_description:"",tkt_picture:"",tkt_title:"",tkt_time:"",tkt_last_update:"",tkt_status:"",tkt_priorities:"",tkt_types:"",tkt_book:"",tkt_act:"",count_all:"",count_open:"",count_closed:""}},setup(){const t=[{key:"#",_style:{width:"5%"}},{key:"TicketID",_style:{width:"10%"}},{key:"TITLE",_style:{width:"10%"}},{key:"START DATE",_style:{width:"11%"}},{key:"STATUS",_style:{width:"5%"}},{key:"TYPE",_style:{width:"4%"}},{key:"BOOKMARK",_style:{width:"5%"}},{key:"MORE",_style:{width:"5%"}}],e=t=>{switch(t){case"Pending":return"success";case"Open":return"secondary";case"Closed":return"warning";case"Banned":return"danger";default:return"primary"}},l=(0,b.iH)([]);async function s(){const t=JSON.parse(localStorage.getItem("USER_DATA"));try{const e=await(0,W.Z)({method:"GET",url:"http://localhost:3000/mongoose/get/check-token",headers:{Authorization:"Bearer "+t.token}});console.log(e)}catch(e){console.log(e)}}const o=(0,b.iH)(1);return{LGblue:C,LGgreen:B,LGred:y,LGlogo:O,columns:t,items:l,getBadge:e,activePage:o,getData:s}},components:{CRow:T.rbF,CCol:T.b7O},methods:{async contactIt(t){const e=t._id.toString();this.$router.push({name:"ST - comment Ticket",params:{itemId:e}})},async toggleDetails(t){t.BOOKMARK=!t.BOOKMARK;try{const e=t._id.toString();await W.Z.put(`http://localhost:3000/mongoose/update/stts_tickets/${e}`,{data:{tkt_book:t.BOOKMARK}}),console.log("อัปเดต BOOKMARK และส่งข้อมูลไปยัง MongoDB สำเร็จ")}catch(e){console.error("เกิดข้อผิดพลาดในการอัปเดตข้อมูล:",e)}},async buttonCancel(t){try{const e=t._id.toString();await W.Z.put(`http://localhost:3000/mongoose/update/stts_tickets/${e}`,{data:{tkt_status:"Cancel"}}),console.log("อัปเดต BOOKMARK และส่งข้อมูลไปยัง MongoDB สำเร็จ"),window.location.reload()}catch(e){console.error("เกิดข้อผิดพลาดในการอัปเดตข้อมูล:",e)}},async toggleButton(t){t.MORE=!t.MORE},async getTicket(){try{const t=JSON.parse(localStorage.getItem("USER_DATA")),e=t.id.toString(),l=await W.Z.post("http://localhost:3000/mongoose/get/stts_tickets",{where:{tkt_act:e,tkt_status:{$ne:"Cancel"}}});this.items=l.data.map(((t,e)=>({"#":e+1,_id:t._id,TicketID:t.tkt_number,TITLE:t.tkt_title,"START DATE":t.tkt_time,STATUS:t.tkt_status,TYPE:t.tkt_types,BOOKMARK:t.tkt_book,MORE:!1})))}catch(t){console.error("Error fetching data:",t)}},async getCountall(){const t=JSON.parse(localStorage.getItem("USER_DATA")),e=t.id.toString(),l=await W.Z.post("http://localhost:3000/mongoose/get/stts_tickets",{where:{tkt_act:e,tkt_status:{$ne:"Cancel"}}});var s=0,o=0,a=0;l.data.forEach((t=>{s++,"Open"==t.tkt_status?o++:"Closed"==t.tkt_status&&a++})),this.count_all=s,this.count_open=o,this.count_closed=a}},mounted(){this.getCountall(),this.getTicket()}},R=l(89);const E=(0,R.Z)(S,[["render",f]]);var M=E},6672:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAlCAYAAADvLtGsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG5SURBVHgB7ViJcYMwEDwnDbgEdRBKoARKoAPowHQQ6IAOKIGhApIKSAfQAdFiNGgUfiQHGHZm7eGxTnt33Nom6mBzppwlZ30QYr8uKXjsdLNz+RBC3J1vdC7td/7yycno+GA3eqo6A6oziaE3OhEuMUvBGKNXwfjYTNP0VePZbADLsmrAtm3jYoy3meu6zTsXQ8bh+77RrBVF0VQG76ZiYP/QQXWLJElq/qAaaTEBHOsWIZIFkBwsz/P6fr9rC4ZsyQiCQNvanufVKkg9sTQgqilnZw2QxCVdgXvLspwWg4XXZApJWIMwDBd3Az7TB+o9ubL0juPMrhIyu3bwwLeMixEtMBRMANe3DJuhhGlrM1XQGLYOmaFk/THNKIpoK6YMUhjpWmRZ1n9Bd1WoJ3NYV22zLeujsn2tRnIAHR4jtxge8saZ6ek58jjdGgsGrI5nlFyr82M9UQ11XdmThMitiYvjuBOjS4TcYvCBsXvgSTp/FqDK7ZgnE4tOEp6kMzZ4/aGxV1xi9opLzF4BMRWdAxXEfNE50Hz7tEmzef0TmVDl7nyjYyzb/dONOjBOn/ODjoNvzpDzBwe/hq4Y93i/MuYAAAAASUVORK5CYII="},6279:function(t,e,l){t.exports=l.p+"img/blueTick.703c14f4.png"},7022:function(t,e,l){t.exports=l.p+"img/greenTick.5dd525ba.png"},2036:function(t,e,l){t.exports=l.p+"img/redTick.c0074217.png"}}]);
//# sourceMappingURL=4046.8a7d61ac.js.map